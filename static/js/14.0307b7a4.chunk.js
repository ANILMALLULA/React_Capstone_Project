(this.webpackJsonpfed_react_capstone_project=this.webpackJsonpfed_react_capstone_project||[]).push([[14],{278:function(t,e,n){"use strict";n.r(e);var r=n(97),c=n(0),a=n(154),o=n(21),u=n(5),i=n(1);a.defaults.global.maintainAspectRatio=!1;var s=function(){var t=Object(o.c)((function(t){return t.products})),e=Object(c.useState)(0),n=Object(r.a)(e,2),s=(n[0],n[1]),b=Object(c.useState)([]),d=Object(r.a)(b,2),l=d[0],f=d[1],j=Object(o.c)((function(t){return t.users})),p=Object(c.useState)({labels:["something"],datasets:[{label:"Top Viewed Products",borderWidth:1,backgroundColor:[]}]}),h=Object(r.a)(p,2),g=h[0],v=h[1];Object(c.useEffect)((function(){s(t.length),v({labels:l.map((function(t){return t.productName})),datasets:[{label:"Top Viewed Products",data:l.map((function(t){return t.views})),borderWidth:1,backgroundColor:["rgba(255,105,145,0.6)","rgba(155,100,210,0.6)","rgba(90,178,255,0.6)","rgba(240,134,67,0.6)","rgba(120,120,120,0.6)","rgba(250,55,197,0.6)"]}]})}),[l]),Object(c.useEffect)((function(){var e=t.products,n=[],r=[],c=[];e.forEach((function(t){n.push(t.productName),r.push(t.views),c.push(t.productPrice),v({labels:n,datasets:[{label:"Total number of views",data:r,backgroundColor:["rgba(255,105,145,0.6)","rgba(155,100,210,0.6)","rgba(90,178,255,0.6)","rgba(240,134,67,0.6)","rgba(120,120,120,0.6)","rgba(250,55,197,0.6)"]}]})})),f(t.products.sort((function(t,e){return t.views>e.views?-1:t.views<e.views?1:0}))),s(t.length)}),[t]);return j.loginSuccess?Object(i.jsxs)("div",{className:"text-center my-3",children:[Object(i.jsx)("input",{type:"number",onChange:function(e){""===e.target.value||e.target.value>t.length||e.target.value<=0?(s(t.length),f(t.products.sort((function(t,e){return t.views>e.views?-1:t.views<e.views?1:0})))):(s(e.target.value),f(t.products.sort((function(t,e){return t.views>e.views?-1:t.views<e.views?1:0})).slice(0,e.target.value)))},className:"form-control",style:{width:"250px",margin:"20px auto"}}),Object(i.jsx)("article",{className:"canvas-container chart",children:Object(i.jsx)(a.Bar,{data:g,options:{maintainAspectRatio:!1,title:{display:!0,text:"Bar Chart",responsive:!0},scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:2}}]}}})})]}):Object(i.jsx)(u.b,{to:"/login"})};a.defaults.global.maintainAspectRatio=!1;var b=function(){var t=Object(c.useState)({}),e=Object(r.a)(t,2),n=e[0],u=e[1],s=Object(o.c)((function(t){return t.products}));Object(c.useEffect)((function(){var t=s.products,e=[],n=[],r=[];t.forEach((function(t){e.push(t.productName),n.push(t.views),r.push(t.productPrice)})),u({labels:e,datasets:[{label:"Total number of views",data:n,backgroundColor:["rgba(255,105,145,0.6)","rgba(155,100,210,0.6)","rgba(90,178,255,0.6)","rgba(240,134,67,0.6)","rgba(120,120,120,0.6)","rgba(250,55,197,0.6)"]}]})}),[s]);return Object(i.jsx)("article",{className:"canvas-container chart",children:Object(i.jsx)(a.Line,{data:n,options:{title:{display:!0,text:"Line Chart"},scales:{yAxes:[{ticks:{min:0,stepSize:5}}]}}})})},d=n(95);e.default=function(){var t=Object(o.b)(),e=Object(c.useState)(!1),n=Object(r.a)(e,2),a=n[0],l=n[1],f=Object(o.c)((function(t){return t.users}));return Object(c.useEffect)((function(){return t(Object(d.d)()),function(){t(Object(d.d)())}}),[]),Object(i.jsx)(i.Fragment,{children:f.loginSuccess?Object(i.jsxs)("div",{children:[Object(i.jsx)("header",{className:"Apheader text-center",children:Object(i.jsx)("h4",{children:"Charts based on No. of views"})}),Object(i.jsxs)("div",{style:{textAlign:"center"},children:[Object(i.jsx)("button",{className:"btn btn-dark m-2",style:{fontWeight:"bold",borderWidth:"1px",borderStyle:"solid",borderColor:"black"},onClick:function(){l(!1)},children:"View As Line Chart"}),Object(i.jsx)("button",{className:"btn btn-light m-2",style:{fontWeight:"bold"},onClick:function(){l(!0)},children:"View As Bar Chart"}),Object(i.jsx)("div",{children:a?Object(i.jsx)(s,{}):Object(i.jsx)(b,{})})]})]}):Object(i.jsx)(u.b,{to:"/login"})})}},95:function(t,e,n){"use strict";n.d(e,"f",(function(){return b})),n.d(e,"i",(function(){return d})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return f})),n.d(e,"g",(function(){return j})),n.d(e,"a",(function(){return p})),n.d(e,"h",(function(){return h})),n.d(e,"b",(function(){return g})),n.d(e,"e",(function(){return v}));var r=n(3),c=n(28),a=n.n(c),o=n(7),u=n(109),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:t,payload:e}},s=function(t){return i(o.i,{error:t})},b=function(t){return i(o.o,{values:t})},d=function(){return i(o.u)},l=function(){return i(o.g)},f=function(){return function(t){t(i(o.j)),a.a.get("/products").then((function(e){var n;t((n=e.data,i(o.k,{products:n})))})).catch((function(e){t(s(e))}))}},j=function(t){return function(e){O(),a.a.get("/products?q=".concat(t)).then((function(t){var n;e((n=t.data,i(o.p,{data:n})))})).catch((function(t){e(s(t))}))}},p=function(t){return function(e){e(i(o.b));var n=Object(u.a)(),c=Date().toLocaleString();console.log(c),a.a.post("/products",Object(r.a)(Object(r.a)({},t),{},{id:n,views:0,creationDate:c})).then((function(t){e(function(t){return i(o.d,{product:t})}(t))})).catch((function(t){var n;e((n=t,i(o.a,{error:n})))}))}},h=function(t){return function(e){e(i(o.t)),a.a.put("/products/"+t.id,t).then((function(t){e(function(t){return i(o.v,{product:t})}(t))})).catch((function(t){var n;e((n=t,i(o.s,{error:n})))}))}},g=function(t){return function(e){e(i(o.f)),a.a.delete("/products/"+t.id).then((function(n){e(function(t){return i(o.h,{product:t})}(t))})).catch((function(t){var n;e((n=t,i(o.e,{error:n})))}))}},v=function(t){return function(e){O(),a.a.put("/products/"+t.id,Object(r.a)(Object(r.a)({},t),{},{views:t.views+1})).then((function(n){e(function(t){return i(o.r,{product:t})}(t))})).catch((function(t){}))}},O=function(){return{type:o.q}}}}]);
//# sourceMappingURL=14.0307b7a4.chunk.js.map